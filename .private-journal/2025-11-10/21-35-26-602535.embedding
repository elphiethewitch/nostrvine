{
  "embedding": [
    -0.005393370520323515,
    -0.04106573760509491,
    -0.04561235383152962,
    0.02277730405330658,
    0.04363120347261429,
    0.004211424849927425,
    -0.00975318718701601,
    0.04172853007912636,
    0.006937750149518251,
    0.020595669746398926,
    0.01188049279153347,
    -0.058813322335481644,
    -0.005690963938832283,
    -0.040709007531404495,
    -0.01624302752315998,
    0.007084779441356659,
    -0.02384994737803936,
    -0.012844393961131573,
    -0.08708403259515762,
    -0.03277081251144409,
    0.0036662232596427202,
    -0.07332723587751389,
    0.06665745377540588,
    -0.0053147864528000355,
    0.037202388048172,
    -0.027722623199224472,
    0.007937461137771606,
    -0.016087273135781288,
    -0.04641535133123398,
    -0.0005386426346376538,
    0.05623567849397659,
    -0.034489016979932785,
    -0.05825544893741608,
    0.0375647135078907,
    0.018081508576869965,
    -0.005895847454667091,
    -0.01769999787211418,
    -0.09324473142623901,
    -0.05899656563997269,
    -0.03992966189980507,
    0.07982581853866577,
    0.026348238810896873,
    -0.061160601675510406,
    0.004634898155927658,
    -0.00039545068284496665,
    -0.09808636456727982,
    -0.08395424485206604,
    -0.06774794310331345,
    0.023546038195490837,
    0.03164496272802353,
    -0.06352432072162628,
    -0.023672517389059067,
    -0.019741812720894814,
    -0.02342846430838108,
    0.022059598937630653,
    0.0662415623664856,
    -0.001531706191599369,
    0.03446543589234352,
    0.012646782211959362,
    0.020673342049121857,
    0.07350776344537735,
    -0.09092734754085541,
    -0.02319389209151268,
    -0.002844400005415082,
    0.013028083369135857,
    -0.06141647323966026,
    0.03017444536089897,
    0.01963360421359539,
    0.10247694700956345,
    -0.016838058829307556,
    -0.04100872948765755,
    0.08485164493322372,
    -0.07239612936973572,
    0.01429911982268095,
    -0.08637115359306335,
    -0.05191594734787941,
    -0.023216910660266876,
    0.010631429962813854,
    -0.07021670043468475,
    -0.0758061334490776,
    -0.026668814942240715,
    -0.08348165452480316,
    0.005279081873595715,
    -0.0034474406857043505,
    0.031024331226944923,
    -0.00014820114301983267,
    0.02800912596285343,
    0.023928344249725342,
    -0.03967517241835594,
    -0.008187824860215187,
    -0.1256394237279892,
    0.042794812470674515,
    0.049616821110248566,
    0.04160661622881889,
    -0.0029021138325333595,
    0.11987613886594772,
    -0.004041272681206465,
    -0.06336149573326111,
    -0.022379059344530106,
    0.07604292780160904,
    -0.023120306432247162,
    0.012140203267335892,
    -0.013603616505861282,
    0.09697427600622177,
    0.03876187652349472,
    -0.07107853889465332,
    -0.0015154170105233788,
    0.019630741328001022,
    -0.12434780597686768,
    0.053477589040994644,
    0.003003260586410761,
    0.13224688172340393,
    -0.013181515969336033,
    -0.07137861102819443,
    0.0013816306600347161,
    0.04693971201777458,
    -0.015167484059929848,
    0.0038351037073880434,
    -0.02987666055560112,
    0.10748425871133804,
    0.18331563472747803,
    0.03344222158193588,
    -0.003751697251573205,
    -0.005382026080042124,
    0.04350274056196213,
    -0.05008026957511902,
    0.06384529918432236,
    9.87111389401034e-33,
    0.08997765928506851,
    -0.04586154595017433,
    0.050097282975912094,
    0.04247599095106125,
    0.020689677447080612,
    0.019116966053843498,
    0.03673969581723213,
    0.04689571261405945,
    -0.03091580793261528,
    -0.01918387971818447,
    -0.008443903177976608,
    0.04495130851864815,
    -0.062079690396785736,
    -0.008568708784878254,
    0.018887324258685112,
    -0.08635671436786652,
    0.015776177868247032,
    0.057877589017152786,
    0.0813262090086937,
    0.05137089639902115,
    0.018440846353769302,
    -0.026392057538032532,
    -0.06942252814769745,
    0.042234595865011215,
    0.01898767240345478,
    0.031784433871507645,
    0.05060404911637306,
    0.030703196302056313,
    -0.02774600125849247,
    0.0013372073881328106,
    0.02566264383494854,
    -0.03757438063621521,
    -0.0054398407228291035,
    -0.011664718389511108,
    0.03609667718410492,
    -0.017067722976207733,
    -0.11777473241090775,
    -0.030829356983304024,
    -0.051084332168102264,
    -0.020292796194553375,
    0.0335150845348835,
    -0.009120108559727669,
    -0.15452814102172852,
    -0.07338479906320572,
    -0.13519221544265747,
    -0.0023559259716421366,
    0.037359464913606644,
    -0.016657838597893715,
    0.016899198293685913,
    -0.057521697133779526,
    0.02964976243674755,
    0.03263603895902634,
    -0.0039953915402293205,
    -0.03447992354631424,
    0.0053659346885979176,
    0.02783842571079731,
    0.022239048033952713,
    -0.06426910310983658,
    0.036062855273485184,
    -0.02178686484694481,
    -0.0008286006632260978,
    -0.022394252941012383,
    0.021800078451633453,
    0.007605333812534809,
    0.01897551119327545,
    0.009951245971024036,
    0.019682787358760834,
    -0.03692525252699852,
    0.06583271920681,
    0.01256634946912527,
    0.01635308377444744,
    0.027047326788306236,
    0.08234097808599472,
    -0.10039062052965164,
    0.04031611606478691,
    -0.000625144166406244,
    -0.047017429023981094,
    0.018373142927885056,
    -0.11833149194717407,
    0.03532855585217476,
    0.04930336773395538,
    -0.06388898938894272,
    -0.0999922901391983,
    0.015585475601255894,
    0.02189178206026554,
    0.02694064751267433,
    0.016880430281162262,
    -0.036543648689985275,
    -0.07819175720214844,
    0.050871990621089935,
    0.047323279082775116,
    0.010744708590209484,
    0.0852179005742073,
    -0.10402566194534302,
    -0.059602607041597366,
    -8.594655598711956e-33,
    0.04260791093111038,
    -0.011137657798826694,
    -0.0025400775484740734,
    -0.02504507079720497,
    0.11858820915222168,
    -0.07213188707828522,
    -0.020950431004166603,
    0.06877021491527557,
    -0.014927818439900875,
    -0.028411125764250755,
    -0.05702894926071167,
    -0.07657112181186676,
    -0.024561146274209023,
    -0.08409666270017624,
    -0.03610772266983986,
    0.0639781579375267,
    0.011845613829791546,
    -0.09132964164018631,
    0.016062049195170403,
    -0.016043704003095627,
    -0.03413378819823265,
    0.15427011251449585,
    -0.020450154319405556,
    0.003845697734504938,
    -0.043922048062086105,
    -0.010964121669530869,
    0.033987171947956085,
    0.0577559731900692,
    -0.08484054356813431,
    -0.0896112248301506,
    0.05167707800865173,
    -0.016728844493627548,
    -0.10069051384925842,
    -0.04070235416293144,
    0.013539459556341171,
    -0.032635148614645004,
    0.07244205474853516,
    0.08361250907182693,
    -0.04546466842293739,
    0.06735735386610031,
    0.047325145453214645,
    -0.012287970632314682,
    -0.059226974844932556,
    -0.027601473033428192,
    0.003687396878376603,
    -0.04919920861721039,
    -0.005979069508612156,
    0.051735054701566696,
    0.0019491782877594233,
    0.013169397599995136,
    0.007796682417392731,
    -0.015490011312067509,
    -0.051359131932258606,
    0.015607069246470928,
    0.09649460017681122,
    -0.05371749401092529,
    0.02137064002454281,
    -0.07667188346385956,
    0.0326683484017849,
    0.03297930583357811,
    -0.023747453466057777,
    -0.05724654719233513,
    0.0013872634153813124,
    0.011050046421587467,
    0.013433221727609634,
    -0.05760250613093376,
    -0.04986950382590294,
    0.019284687936306,
    -0.05622830241918564,
    0.02050703391432762,
    -0.06143992394208908,
    0.018665213137865067,
    0.05897313728928566,
    0.030813079327344894,
    0.05864260345697403,
    0.0014242916367948055,
    0.02647656947374344,
    -0.0635833889245987,
    0.11398180574178696,
    -0.012970986776053905,
    -0.10983383655548096,
    0.04628738760948181,
    0.011893688701093197,
    -0.049644410610198975,
    0.03736581653356552,
    0.013873133808374405,
    0.022523049265146255,
    0.01884155534207821,
    -0.0032918567303568125,
    0.018778285011649132,
    -0.07869064062833786,
    -0.0088020209223032,
    0.02370454929769039,
    -0.016704054549336433,
    0.025117818266153336,
    -5.7583612544931384e-8,
    -0.0780649483203888,
    0.015772653743624687,
    -0.04230207949876785,
    0.050651609897613525,
    0.02397836185991764,
    0.0037939418107271194,
    0.008686598390340805,
    0.08950546383857727,
    0.08875333517789841,
    -0.044700585305690765,
    0.05787161737680435,
    0.059605952352285385,
    0.016676992177963257,
    0.0581931546330452,
    -0.02423141710460186,
    -0.05275709927082062,
    0.042906370013952255,
    0.02332398295402527,
    -0.07520777732133865,
    0.04831528663635254,
    0.001240450656041503,
    0.05395559221506119,
    0.00807767454534769,
    -0.07674232870340347,
    0.06444770842790604,
    0.029624206945300102,
    0.050441715866327286,
    0.023355424404144287,
    0.03338746726512909,
    -0.00007906864630058408,
    -0.035364534705877304,
    -0.02505398355424404,
    0.049577753990888596,
    -0.07542891800403595,
    -0.0012921361485496163,
    0.02252957597374916,
    0.05097641795873642,
    0.01824946701526642,
    0.015100712887942791,
    0.050434138625860214,
    0.07513396441936493,
    0.00604327954351902,
    0.048868488520383835,
    0.028580108657479286,
    -0.0357818678021431,
    -0.02103429101407528,
    -0.05718555673956871,
    0.03556608781218529,
    0.09002561867237091,
    0.03039764054119587,
    -0.05964941903948784,
    -0.07682356983423233,
    -0.03649966046214104,
    0.002713305177167058,
    0.03953703120350838,
    0.00795808993279934,
    0.06758543103933334,
    0.015467763878405094,
    0.09478158503770828,
    0.06711805611848831,
    0.11214715987443924,
    -0.06335347145795822,
    -0.0096747362986207,
    0.025407152250409126
  ],
  "text": "**Goal**: Preload 5000+ curated Nostr events into local Drift database on first launch to give users immediate content.\n\n**User Requirements**:\n- Event types: Video events (kind 34236), User profiles (kind 0), Reposts (kind 6), Reactions (kind 7)\n- Volume: Heavy (5000+ events, ~20-50MB)\n- Timing: Load when database is empty (first install or after clear data)\n\n**Architecture Plan**:\n\n1. **Seed Data Format**: JSON file in assets\n   - `assets/seed_data/nostr_events_seed.json`\n   - Array of serialized Nostr events (already JSON format from nostr_sdk)\n   - Include profiles for all video authors to avoid missing avatars/names\n   - PRO: Easy to generate from production relay, human-readable, compresses well\n   - CON: Slightly slower to parse than SQLite, but acceptable for one-time load\n\n2. **Seed Data Generation Script** (backend/scripts or separate):\n   - Query production relay for:\n     - Top 2000 video events (kind 34236) by loop count/popularity\n     - 500 viral reposts (kind 6)\n     - User profiles (kind 0) for all video authors\n     - Popular reactions (kind 7) for engagement metrics\n   - Export to JSON file\n   - Validate event signatures\n   - Script can run periodically to update seed data for new releases\n\n3. **Preload Service** (`lib/services/seed_data_preload_service.dart`):\n   ```dart\n   class SeedDataPreloadService {\n     static Future<void> loadSeedDataIfNeeded(AppDatabase db) async {\n       // Check if database is empty\n       final eventCount = await db.nostrEventsDao.getEventCount();\n       if (eventCount > 0) {\n         Log.info('Database already populated, skipping seed data');\n         return;\n       }\n       \n       // Load JSON from assets\n       final jsonString = await rootBundle.loadString('assets/seed_data/nostr_events_seed.json');\n       final eventsJson = jsonDecode(jsonString) as List;\n       \n       // Parse to Event objects\n       final events = eventsJson.map((e) => Event.fromJson(e)).toList();\n       \n       // Batch insert using existing upsertEventsBatch\n       await db.nostrEventsDao.upsertEventsBatch(events);\n       \n       Log.info('Loaded ${events.length} seed events into database');\n     }\n   }\n   ```\n\n4. **Integration into main.dart**:\n   - Add new startup phase after data migration\n   - Call `SeedDataPreloadService.loadSeedDataIfNeeded()` before app launch\n   - Non-blocking: show splash screen during load\n\n5. **Performance Considerations**:\n   - Batch insert in transaction (already implemented in upsertEventsBatch)\n   - Asset compression: JSON compresses ~70% with gzip\n   - Expected load time: 2-5 seconds for 5000 events on modern devices\n   - Video metrics auto-populate via existing upsertEventsBatch logic\n\n6. **Testing**:\n   - Unit test: Parse seed JSON and validate event signatures\n   - Integration test: Load seed data and query video feed\n   - Performance test: Measure load time on low-end devices\n\n**Implementation Order**:\n1. Add `getEventCount()` to NostrEventsDao\n2. Create SeedDataPreloadService with empty database check\n3. Create seed data generation script (can be Python/Dart/Node)\n4. Generate initial seed JSON from production relay\n5. Add to assets and pubspec.yaml\n6. Integrate into main.dart startup\n7. Test on fresh install",
  "sections": [
    "Project Notes",
    "Seed Data Preloading Feature Design"
  ],
  "timestamp": 1762810526602,
  "path": "/Users/rabble/code/andotherstuff/openvine/.private-journal/2025-11-10/21-35-26-602535.md"
}