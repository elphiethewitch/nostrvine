---
title: "10:36:27 AM - November 6, 2025"
date: 2025-11-05T21:36:27.709Z
timestamp: 1762378587709
---

## Project Notes

**Share Video Contact Display and Search Debugging**

Fixed and verified contact display showing npub/nip05 instead of raw hex:
- Modified `_buildUserTile` in `share_video_menu.dart` line 1295-1322
- Display logic: `profile?.nip05 ?? normalizeToNpub(user.pubkey) ?? user.pubkey`
- Added test mock for `followSets` to fix test failures
- All 3 tests pass: npub fallback, nip05 display, no-profile fallback

Search debugging approach:
- Added logging directly in TextField's `onChanged` callback (line 1141-1145)
- This will show if the callback is firing at all when user types
- If callback fires but `_searchUsers` doesn't execute, it's an async issue
- If callback doesn't fire at all, it's a widget lifecycle or rebuild issue

Test file: `test/widgets/share_video_contact_display_test.dart`
- Required adding `when(mockSocialService.followSets).thenReturn([])` to setUp
- Tests verify npub format and nip05 are shown, never raw hex pubkey
