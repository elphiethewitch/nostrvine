# Pre-commit hooks for OpenVine
# See https://pre-commit.com for more information
repos:
  - repo: local
    hooks:
      - id: flutter-analyze
        name: Flutter Analyze
        entry: bash -c 'cd mobile && flutter analyze'
        language: system
        files: \.dart$
        pass_filenames: false
        
      - id: flutter-format
        name: Flutter Format
        entry: bash -c 'cd mobile && dart format --set-exit-if-changed .'
        language: system
        files: \.dart$
        pass_filenames: false
        
      - id: flutter-test
        name: Flutter Test
        entry: bash -c 'cd mobile && flutter test'
        language: system
        files: \.dart$
        pass_filenames: false
        
      - id: check-file-length
        name: Check File Length
        entry: mobile/tools/max_file_length.dart
        language: dart
        files: \.dart$
        exclude: \.g\.dart$|\.freezed\.dart$|\.mocks\.dart$
        
      - id: check-function-length
        name: Check Function Length
        entry: mobile/tools/max_function_length.dart
        language: dart
        files: \.dart$
        exclude: \.g\.dart$|\.freezed\.dart$|\.mocks\.dart$
        
      - id: no-future-delayed
        name: No Future.delayed
        entry: bash -c 'if grep -r "Future\.delayed" mobile/lib --include="*.dart"; then echo "Future.delayed found! Use proper async patterns instead."; exit 1; fi'
        language: system
        pass_filenames: false
        
      - id: aboutme-comments
        name: Check ABOUTME Comments
        entry: mobile/tools/check_aboutme_comments.dart
        language: dart
        files: \.dart$
        exclude: test/|\.g\.dart$|\.freezed\.dart$|\.mocks\.dart$