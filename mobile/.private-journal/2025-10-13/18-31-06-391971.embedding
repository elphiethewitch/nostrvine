{
  "embedding": [
    -0.09378692507743835,
    0.0002973840164486319,
    0.0057488190941512585,
    -0.04184303432703018,
    0.043214209377765656,
    -0.04229104146361351,
    -0.06748930364847183,
    -0.03256271779537201,
    -0.06039315462112427,
    0.06791289895772934,
    0.06718887388706207,
    0.026534268632531166,
    0.038542818278074265,
    -0.0019732771907001734,
    -0.016661962494254112,
    -0.005616128910332918,
    -0.020268959924578667,
    -0.06640242785215378,
    -0.10939700156450272,
    0.021856721490621567,
    -0.03873646631836891,
    -0.0832645446062088,
    0.0720709040760994,
    -0.05416128784418106,
    -0.02588527277112007,
    -0.05736315995454788,
    -0.06457994878292084,
    -0.11044828593730927,
    -0.044327512383461,
    -0.08954958617687225,
    0.05720699578523636,
    0.03644849732518196,
    -0.11437143385410309,
    -0.05027876794338226,
    0.015415629372000694,
    0.024869319051504135,
    -0.03224264457821846,
    -0.011461884714663029,
    -0.031365372240543365,
    -0.017223628237843513,
    0.020264016464352608,
    -0.036477215588092804,
    -0.04620695486664772,
    -0.007757009472697973,
    0.00010701725113904104,
    0.01206110417842865,
    0.011488101445138454,
    -0.014486708678305149,
    0.021141232922673225,
    -0.0004902993096038699,
    -0.06371118128299713,
    -0.01961395889520645,
    0.0030881452839821577,
    0.0449315570294857,
    0.06239497289061546,
    0.0033833070192486048,
    -0.0005159179563634098,
    0.04617488756775856,
    -0.031428951770067215,
    0.035442907363176346,
    0.05516597256064415,
    0.016327332705259323,
    -0.030134720727801323,
    -0.026746824383735657,
    0.04655599966645241,
    0.010658836923539639,
    0.03803599625825882,
    -0.07934392988681793,
    0.0892748236656189,
    -0.06163867563009262,
    0.009256213903427124,
    0.04889857396483421,
    -0.04572540149092674,
    0.003837091848254204,
    -0.007588222622871399,
    -0.08833261579275131,
    0.030750200152397156,
    0.060780081897974014,
    0.06697697192430496,
    -0.10690158605575562,
    0.02089349739253521,
    -0.058504413813352585,
    0.04831131175160408,
    0.004760488402098417,
    0.02547585405409336,
    0.00004471997090149671,
    0.00574125349521637,
    -0.024609031155705452,
    0.004117840901017189,
    0.0010225098812952638,
    0.014453073032200336,
    0.06949872523546219,
    -0.010956852696835995,
    0.016637109220027924,
    0.1018991693854332,
    -0.000556887243874371,
    0.02609817124903202,
    0.09271665662527084,
    -0.08132049441337585,
    0.05335932597517967,
    0.04343676194548607,
    -0.03014146164059639,
    -0.01555591356009245,
    0.0400175042450428,
    0.06184486672282219,
    0.011653432622551918,
    0.04576345533132553,
    -0.0033697723411023617,
    -0.057400114834308624,
    -0.009451191872358322,
    0.004967964719980955,
    -0.04959513619542122,
    -0.03780832886695862,
    -0.023136351257562637,
    0.011211814358830452,
    -0.007725422270596027,
    -0.05309365689754486,
    0.053025420755147934,
    -0.050350334495306015,
    0.02619713917374611,
    0.12207168340682983,
    0.05078146979212761,
    -0.014423945918679237,
    -0.05328388512134552,
    -0.04381169378757477,
    0.009609001688659191,
    0.07981642335653305,
    1.0219089609212507e-32,
    0.02671225368976593,
    -0.07464075833559036,
    -0.003702176734805107,
    0.0006722253165207803,
    0.04923894256353378,
    -0.0070144920609891415,
    0.012662083841860294,
    0.05249299481511116,
    -0.028504295274615288,
    -0.09809740632772446,
    0.033113040030002594,
    -0.03852318227291107,
    -0.08319662511348724,
    0.002576094353571534,
    -0.005087663419544697,
    -0.06457819044589996,
    -0.0027056450489908457,
    0.06324290484189987,
    0.10034743696451187,
    0.03755281865596771,
    0.019157953560352325,
    -0.061775002628564835,
    -0.08927393704652786,
    -0.022797882556915283,
    0.0002275784354424104,
    0.05196709558367729,
    0.05363694578409195,
    0.0264561977237463,
    -0.010209337808191776,
    0.019151994958519936,
    0.004302100744098425,
    -0.021764446049928665,
    0.0939456969499588,
    -0.005758375395089388,
    -0.07071484625339508,
    -0.06182600557804108,
    -0.06803382188081741,
    -0.054173119366168976,
    -0.0913306325674057,
    -0.008274773135781288,
    0.013638208620250225,
    0.020712286233901978,
    -0.14202778041362762,
    0.022224873304367065,
    -0.04369264468550682,
    -0.06814223527908325,
    -0.060427140444517136,
    0.04627788066864014,
    0.02588903345167637,
    0.07017654180526733,
    0.0073377154767513275,
    -0.024873921647667885,
    0.03813496232032776,
    -0.10791859775781631,
    -0.056403517723083496,
    0.06745564192533493,
    0.014253856614232063,
    -0.05251689627766609,
    -0.011775062419474125,
    -0.06790412962436676,
    -0.004747890401631594,
    0.005686391144990921,
    0.0008058720268309116,
    0.05283640697598457,
    0.03258350491523743,
    -0.02053643949329853,
    -0.05749661102890968,
    -0.006245033349841833,
    0.0164367463439703,
    -0.02452765591442585,
    -0.07396253943443298,
    -0.000479353591799736,
    -0.00027861003763973713,
    -0.030300529673695564,
    0.04113496094942093,
    -0.08777080476284027,
    -0.041291866451501846,
    0.02535698004066944,
    -0.12417251616716385,
    -0.002650811104103923,
    0.002351620700210333,
    -0.049101077020168304,
    -0.030506273731589317,
    -0.010330120101571083,
    0.027433305978775024,
    0.0016845072386786342,
    0.07481494545936584,
    -0.015466087497770786,
    -0.06297960132360458,
    0.02433723956346512,
    0.10223264247179031,
    0.08097141236066818,
    0.05475569888949394,
    -0.0545022077858448,
    0.061081934720277786,
    -9.03249638766655e-33,
    0.007862660102546215,
    0.013314277864992619,
    -0.08934873342514038,
    0.05211006477475166,
    0.08956541866064072,
    -0.01123473048210144,
    0.03327586501836777,
    0.0225466787815094,
    0.0026053187903016806,
    -0.06147312372922897,
    -0.07261883467435837,
    0.07559759169816971,
    -0.09052392840385437,
    -0.06046513840556145,
    -0.09299507737159729,
    0.01148697454482317,
    0.02661065384745598,
    -0.052561160176992416,
    -0.04837090149521828,
    0.020574107766151428,
    0.03862369433045387,
    0.06202463433146477,
    0.0686628520488739,
    0.0625668540596962,
    -0.09799344092607498,
    0.04241711273789406,
    0.05710725486278534,
    0.01797504350543022,
    0.0024668166879564524,
    -0.06008785218000412,
    0.13161838054656982,
    -0.006073149852454662,
    -0.05683784559369087,
    0.05813951790332794,
    0.04643053933978081,
    -0.0840655118227005,
    0.047007277607917786,
    0.005211482290178537,
    -0.039103686809539795,
    0.04846202954649925,
    0.094970703125,
    0.023554153740406036,
    0.007286328822374344,
    0.0068327318876981735,
    0.06615243852138519,
    -0.028692953288555145,
    0.03289001062512398,
    0.004607385024428368,
    -0.04767816886305809,
    0.05283160135149956,
    0.01661221869289875,
    -0.07349783927202225,
    -0.015789717435836792,
    0.04059777408838272,
    0.05955620855093002,
    0.026599472388625145,
    0.0181766077876091,
    0.035960763692855835,
    0.0064212060533463955,
    -0.012515646405518055,
    0.042516738176345825,
    -0.0006654670578427613,
    -0.07049804925918579,
    0.02263903245329857,
    0.02779090777039528,
    0.01521358173340559,
    0.024580534547567368,
    0.06754609197378159,
    -0.03947760909795761,
    0.051635950803756714,
    -0.07158796489238739,
    0.007397069130092859,
    0.06462326645851135,
    -0.018319685012102127,
    0.13918893039226532,
    0.04136195033788681,
    0.034063227474689484,
    0.0063805715180933475,
    0.08112752437591553,
    -0.06605412065982819,
    -0.12327496707439423,
    -0.011669032275676727,
    -0.05431720241904259,
    -0.026943793520331383,
    -0.027464112266898155,
    0.051964737474918365,
    -0.0019587178248912096,
    0.06422034651041031,
    0.06321480125188828,
    -0.03341023996472359,
    0.0008283860515803099,
    0.03630530461668968,
    -0.03712886944413185,
    0.00841891672462225,
    0.09063592553138733,
    -6.097741334087914e-8,
    -0.009984358213841915,
    0.027653437107801437,
    -0.03422841057181358,
    -0.011230207979679108,
    0.06068507581949234,
    -0.029861608520150185,
    0.048177801072597504,
    0.036657609045505524,
    0.07417984306812286,
    -0.08131520450115204,
    0.02682131715118885,
    0.04073759540915489,
    -0.007044305093586445,
    -0.018917148932814598,
    0.04092666134238243,
    -0.09047520905733109,
    0.047088079154491425,
    0.026244258508086205,
    -0.06857909262180328,
    -0.0814865306019783,
    -0.08913667500019073,
    -0.009407449513673782,
    -0.012962745502591133,
    -0.022302022203803062,
    -0.03357602655887604,
    0.0032337151933461428,
    0.045094169676303864,
    -0.006925232708454132,
    -0.023421449586749077,
    -0.03083561733365059,
    -0.02645891346037388,
    -0.00939574558287859,
    0.026594916358590126,
    -0.09936021268367767,
    -0.011481998488307,
    0.059414591640233994,
    0.08156974613666534,
    0.007042347453534603,
    0.09058348089456558,
    0.03908452391624451,
    0.023457210510969162,
    0.02278318628668785,
    0.09169699251651764,
    -0.05168731510639191,
    -0.039864927530288696,
    -0.023488275706768036,
    0.03227689117193222,
    0.030006101354956627,
    -0.05032007396221161,
    -0.022377073764801025,
    -0.09823911637067795,
    -0.022149400785565376,
    -0.04251441732048988,
    0.02948002703487873,
    0.013823756016790867,
    -0.031441088765859604,
    0.0657297819852829,
    -0.03998748958110809,
    0.04720965027809143,
    0.0333273708820343,
    0.14395827054977417,
    -0.035126376897096634,
    -0.006086782086640596,
    0.10744830965995789
  ],
  "text": "Upload Manager Thumbnail URL Race Condition Fix (commit a6cec2b):\n\nLocation: lib/services/upload_manager.dart:564-576 (_handleUploadSuccess method)\n\nThe Problem:\nUser reported being stuck on upload screen even though logs showed successful thumbnail upload and Nostr event publishing. Published events were missing 'image' component in imeta tags.\n\nRoot Cause Analysis:\n1. _executeUploadWithTimeout() uploads thumbnail and stores URL at line 551: \n   `await _updateUpload(upload.copyWith(thumbnailPath: thumbnailCdnUrl));`\n\n2. _handleUploadSuccess() called with OLD upload parameter from line 443\n\n3. _createSuccessfulUpload() at line 575 creates new record from stale upload\n\n4. Thumbnail URL update gets overwritten\n\nThe Fix:\n```dart\n// Get the LATEST upload record from Hive (may have been updated with thumbnail URL)\nfinal latestUpload = getUpload(upload.id) ?? upload;\n\n// Create updated upload with success metadata\nfinal updatedUpload = _createSuccessfulUpload(latestUpload, result);\n```\n\nThis ensures _createSuccessfulUpload() receives the upload record that includes the thumbnail URL.\n\nTesting:\n- Existing tests passed (upload_manager_thumbnail_test.dart, upload_publish_race_condition_test.dart)\n- Created new integration test: thumbnail_url_preservation_test.dart\n- All tests green\n\nNext Steps:\n- Need manual testing to verify UI now navigates away from upload screen\n- Consider adding more integration tests for complete upload â†’ publish flow\n- User suggested need for integration tests - this fix addresses that",
  "sections": [
    "Project Notes"
  ],
  "timestamp": 1760398266391,
  "path": "/Users/rabble/code/andotherstuff/openvine/mobile/.private-journal/2025-10-13/18-31-06-391971.md"
}