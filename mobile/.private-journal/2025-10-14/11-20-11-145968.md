---
title: "11:20:11 AM - October 14, 2025"
date: 2025-10-13T22:20:11.145Z
timestamp: 1760394011145
---

## Project Notes

**Background Video Playback Fix**

Fixed critical bug where videos would start playing after app was backgrounded. The issue was that VisibilityDetector callbacks were firing ~26ms after the app backgrounded (during Flutter's rebuild after lifecycle change), and VideoFeedItem was calling setActiveVideo() even though the app was no longer visible.

Solution: Added app foreground state tracking via Riverpod provider. VideoFeedItem now checks if app is in foreground before calling setActiveVideo().

Implementation order matters:
1. AppLifecycleHandler sets foreground=false FIRST
2. Then clears active video
3. VisibilityDetector callbacks fire but are now blocked by foreground check

This ensures no video can become active when app is backgrounded, regardless of when UI callbacks fire.

