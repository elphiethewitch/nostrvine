---
title: "12:33:49 AM - October 5, 2025"
date: 2025-10-04T11:33:49.180Z
timestamp: 1759577629180
---

## Project Notes

## Profile Videos Loading Bug - Root Cause Analysis

**Issue**: Profile videos showed "No Videos Yet" on initial navigation, but loaded fine after clicking refresh.

**Root Cause**: GlobalKey reuse in main.dart navigation code prevented ProfileScreenScrollable from re-initializing when navigating between different user profiles.

**Files Modified**:
1. lib/main.dart - Changed from GlobalKey to ValueKey with unique pubkey values
2. lib/screens/profile_screen_scrollable.dart - Fixed AsyncValue conversion, added lifecycle logging
3. lib/widgets/video_feed_item.dart - Changed disposal to use activeVideoNotifier

**Commits**:
- 0253aae: Added comprehensive logging for debugging
- edb009d: Fixed AsyncValue conversion logic
- 53b891e: Fixed GlobalKey reuse bug
- f5629c1: Improved video disposal pattern

**Testing**: Verified that ProfileVideosProvider tests and ProfileStatsProvider tests pass. Some unrelated tests fail (profile_video_navigation_lifecycle_simple_test expects null but gets ActiveVideoState instance).

**Key Architecture Pattern**: 
- Use ValueKey with meaningful unique values (like user pubkey) for widgets that represent different entities
- Never reuse GlobalKey for multiple instances of the same widget type
- Always add lifecycle logging (initState, didUpdateWidget, dispose) when debugging widget initialization issues
